{"message":"elasticsearch cluster is down!","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 16:30:49"}
{"expose":true,"statusCode":400,"status":400,"body":"{\n    \"payment_method\":\"COD\",\n    \"order\":{\n        \"is_received_at_store\":false,\n        \"expected_received_date\":\"2022-03-20T08:31:55.582Z\",\n        \n    }\n}","type":"entity.parse.failed","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 16:41:53","message":"Unexpected token } in JSON at position 156","stack":"SyntaxError: Unexpected token } in JSON at position 156\n    at JSON.parse (<anonymous>)\n    at parse (/home/minhkha/Desktop/store/stht-server/node_modules/body-parser/lib/types/json.js:89:19)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/body-parser/lib/read.js:121:18\n    at invokeCallback (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:224:16)\n    at done (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:273:7)\n    at IncomingMessage.emit (events.js:412:35)\n    at IncomingMessage.emit (domain.js:470:12)\n    at endReadableNT (internal/streams/readable.js:1317:12)\n    at processTicksAndRejections (internal/process/task_queues.js:82:21)"}
{"statusCode":400,"error":4000,"message":"expected_received_date must be less than Fri Aug 06 2021 00:00:00 GMT+0700 (Indochina Time)","errors":{"expected_received_date":4000802},"user_id":"5e747e4f6bd99e6a93faec25","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 16:42:00","stack":"Error: expected_received_date must be less than Fri Aug 06 2021 00:00:00 GMT+0700 (Indochina Time)\n    at _callee12$ (/home/minhkha/Desktop/store/stht-server/src/search/cart/v3/cart.controller.js:252:19)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:32:7\n    at new Promise (<anonymous>)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:21:12\n    at checkout (/home/minhkha/Desktop/store/stht-server/src/search/cart/v3/cart.controller.js:240:36)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/validator.js:29:3\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:317:13)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/auth.js:76:14"}
{"expose":true,"statusCode":400,"status":400,"body":"{\n    \"payment_method\":\"COD\",\n    \"order\":{\n        \"is_received_at_store\":false,\n        \n\n    }\n}","type":"entity.parse.failed","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 16:42:13","message":"Unexpected token } in JSON at position 96","stack":"SyntaxError: Unexpected token } in JSON at position 96\n    at JSON.parse (<anonymous>)\n    at parse (/home/minhkha/Desktop/store/stht-server/node_modules/body-parser/lib/types/json.js:89:19)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/body-parser/lib/read.js:121:18\n    at invokeCallback (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:224:16)\n    at done (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:213:7)\n    at IncomingMessage.onEnd (/home/minhkha/Desktop/store/stht-server/node_modules/raw-body/index.js:273:7)\n    at IncomingMessage.emit (events.js:412:35)\n    at IncomingMessage.emit (domain.js:470:12)\n    at endReadableNT (internal/streams/readable.js:1317:12)\n    at processTicksAndRejections (internal/process/task_queues.js:82:21)"}
{"statusCode":400,"error":7000,"message":"promotion code is out of stock","errors":{"total":7007101},"level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 16:42:17","stack":"Error: promotion code is out of stock\n    at _callee3$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:204:13)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:32:7\n    at new Promise (<anonymous>)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:21:12\n    at /home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:161:33\n    at _callee$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:90:55)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"message":"elasticsearch cluster is down!","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 20:24:27"}
{"statusCode":400,"error":7000,"message":"promotion code is out of stock","errors":{"total":7007101},"level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 22:12:47","stack":"Error: promotion code is out of stock\n    at _callee3$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:204:13)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:32:7\n    at new Promise (<anonymous>)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:21:12\n    at /home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:161:33\n    at _callee$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:90:55)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"statusCode":400,"error":7000,"message":"promotion code is out of stock","errors":{"total":7007101},"level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 22:14:09","stack":"Error: promotion code is out of stock\n    at _callee3$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:204:13)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:32:7\n    at new Promise (<anonymous>)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:21:12\n    at /home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:161:33\n    at _callee$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion-code/v2/promotion-code.service.js:90:55)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"statusCode":400,"error":7000,"message":"status is not valid, the valid value is \"disabled\" when previous status is not \"active\"","errors":{"status":4000103},"user_id":"5e747e4f6bd99e6a93faec25","company_id":"5e747f036bd99e6a93faef55","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 22:30:19","stack":"Error: status is not valid, the valid value is \"disabled\" when previous status is not \"active\"\n    at _callee3$ (/home/minhkha/Desktop/store/stht-server/src/search/promotion/v2/promotion.owner.controller.js:307:9)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"isJoi":true,"name":"ValidationError","details":[{"message":"\"model_scope\" is required","path":["products",0,"model_scope"],"type":"any.required","context":{"key":"model_scope","label":"model_scope"}},{"message":"\"unlimited\" is not allowed","path":["products",0,"unlimited"],"type":"any.unknown","context":{"key":"unlimited","label":"unlimited"}},{"message":"\"start_at\" must be larger than or equal to \"Tue Aug 03 2021 20:19:26 GMT+0700 (Indochina Time)\"","path":["start_at"],"type":"date.min","context":{"limit":"2021-08-03T13:19:26.618Z","value":"2021-08-03T08:39:08.674Z","key":"start_at","label":"start_at"}}],"_object":{"promotion_id":"61097307d824fb2cd34c8268","product_scope":"partial","products":[{"product_id":"5e74949d6bd99e6a93fb262f","unlimited":true}],"store_id":"5e74812c6bd99e6a93faf8dd","name":"Thích thì KM","description":"Ngon, bổ, rẻ","type":"percent","value":"0.5","refund":"0.2","start_at":"2021-08-03T08:39:08.674Z","expire_at":"2021-08-15T08:39:08.674Z","conditions":[{"type":"min-quantity","value":3}]},"level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 23:52:10","message":"child \"products\" fails because [\"products\" at position 0 fails because [child \"model_scope\" fails because [\"model_scope\" is required], child \"unlimited\" fails because [\"unlimited\" is not allowed]]]. child \"start_at\" fails because [\"start_at\" must be larger than or equal to \"Tue Aug 03 2021 20:19:26 GMT+0700 (Indochina Time)\"]","stack":"ValidationError: child \"products\" fails because [\"products\" at position 0 fails because [child \"model_scope\" fails because [\"model_scope\" is required], child \"unlimited\" fails because [\"unlimited\" is not allowed]]]. child \"start_at\" fails because [\"start_at\" must be larger than or equal to \"Tue Aug 03 2021 20:19:26 GMT+0700 (Indochina Time)\"]\n    at Object.exports.process (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/errors.js:202:19)\n    at internals.Object._validateWithOptions (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/types/any/index.js:763:31)\n    at module.exports.internals.Any.validate (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/index.js:145:23)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/joi.validate.js:12:30\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:317:13)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at _callee7$ (/home/minhkha/Desktop/store/stht-server/src/commons/middlewares/auth.js:318:16)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"statusCode":400,"error":4000,"message":{"products":{"unlimited":"\"unlimited\" is not allowed"},"start_at":"\"start_at\" must be larger than or equal to \"Tue Aug 03 2021 20:19:26 GMT+0700 (Indochina Time)\""},"errors":{"products":{"0":{"unlimited":4000102}},"start_at":4000701},"user_id":"5e747e4f6bd99e6a93faec25","company_id":"5e747f036bd99e6a93faef55","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 23:52:10","stack":"Error: [object Object]\n    at Object.getJoiError (/home/minhkha/Desktop/store/stht-server/src/commons/over_function/over.js:5:16)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/joi.validate.js:17:22\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:317:13)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at _callee7$ (/home/minhkha/Desktop/store/stht-server/src/commons/middlewares/auth.js:318:16)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"isJoi":true,"name":"ValidationError","details":[{"message":"\"model_scope\" is required","path":["products",0,"model_scope"],"type":"any.required","context":{"key":"model_scope","label":"model_scope"}},{"message":"\"unlimited\" is not allowed","path":["products",0,"unlimited"],"type":"any.unknown","context":{"key":"unlimited","label":"unlimited"}}],"_object":{"promotion_id":"61097307d824fb2cd34c8268","product_scope":"partial","products":[{"product_id":"5e74949d6bd99e6a93fb262f","unlimited":true}],"store_id":"5e74812c6bd99e6a93faf8dd","name":"Thích thì KM","description":"Ngon, bổ, rẻ","type":"percent","value":"0.5","refund":"0.2","start_at":"2021-08-03T23:55:08.674Z","expire_at":"2021-08-31T08:39:08.674Z","conditions":[{"type":"min-quantity","value":3}]},"level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 23:53:40","message":"child \"products\" fails because [\"products\" at position 0 fails because [child \"model_scope\" fails because [\"model_scope\" is required], child \"unlimited\" fails because [\"unlimited\" is not allowed]]]","stack":"ValidationError: child \"products\" fails because [\"products\" at position 0 fails because [child \"model_scope\" fails because [\"model_scope\" is required], child \"unlimited\" fails because [\"unlimited\" is not allowed]]]\n    at Object.exports.process (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/errors.js:202:19)\n    at internals.Object._validateWithOptions (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/types/any/index.js:763:31)\n    at module.exports.internals.Any.validate (/home/minhkha/Desktop/store/stht-server/node_modules/@hapi/joi/lib/index.js:145:23)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/joi.validate.js:12:30\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:317:13)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at _callee7$ (/home/minhkha/Desktop/store/stht-server/src/commons/middlewares/auth.js:318:16)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
{"statusCode":400,"error":4000,"message":{"products":{"unlimited":"\"unlimited\" is not allowed"}},"errors":{"products":{"0":{"unlimited":4000102}}},"user_id":"5e747e4f6bd99e6a93faec25","company_id":"5e747f036bd99e6a93faef55","level":"error","service":"sumviet-apidevelopment","timestamp":"2021-08-03 23:53:40","stack":"Error: [object Object]\n    at Object.getJoiError (/home/minhkha/Desktop/store/stht-server/src/commons/over_function/over.js:5:16)\n    at /home/minhkha/Desktop/store/stht-server/src/commons/middlewares/joi.validate.js:17:22\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:317:13)\n    at /home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/minhkha/Desktop/store/stht-server/node_modules/express/lib/router/index.js:275:10)\n    at _callee7$ (/home/minhkha/Desktop/store/stht-server/src/commons/middlewares/auth.js:318:16)\n    at tryCatch (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:63:40)\n    at Generator.invoke [as _invoke] (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:294:22)\n    at Generator.next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js:119:21)\n    at asyncGeneratorStep (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:24)\n    at _next (/home/minhkha/Desktop/store/stht-server/node_modules/@babel/runtime/helpers/asyncToGenerator.js:25:9)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)"}
